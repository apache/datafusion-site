<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache DataFusion Comet 0.8.0 Release - Apache DataFusion Blog</title>
<link href="/blog/css/bootstrap.min.css" rel="stylesheet">
<link href="/blog/css/fontawesome.all.min.css" rel="stylesheet">
<link href="/blog/css/headerlink.css" rel="stylesheet">
<link href="/blog/highlight/default.min.css" rel="stylesheet">
<link href="/blog/css/app.css" rel="stylesheet">
<script src="/blog/highlight/highlight.js"></script>
<script>hljs.highlightAll();</script>  </head>
  <body class="d-flex flex-column h-100">
  <main class="flex-shrink-0">
<!-- nav bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" aria-label="Fifth navbar example">
    <div class="container-fluid">
        <a class="navbar-brand" href="/blog"><img src="/blog/images/logo_original4x.png" style="height: 32px;"/> Apache DataFusion Blog</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarADP" aria-controls="navbarADP" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarADP">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="/blog/about.html">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog/feed.xml">RSS</a>
                </li>
            </ul>
        </div>
    </div>
</nav>    
<!-- article contents -->
<div id="contents">
  <div class="bg-white p-4 p-md-5 rounded">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 main-content">
        <h1>
          Apache DataFusion Comet 0.8.0 Release
        </h1>
        <p>Posted on: Tue 06 May 2025 by pmc</p>

        <aside class="toc-container d-md-none mb-2">
          <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#release-highlights">Release Highlights</a><ul>
<li><a href="#performance-stability">Performance &amp; Stability</a></li>
</ul>
</li>
<li><a href="#native-shuffle-improvements">Native Shuffle Improvements</a></li>
<li><a href="#experimental-support-for-datafusions-parquet-scan">Experimental Support for DataFusion’s Parquet Scan</a></li>
<li><a href="#updates-to-supported-spark-versions">Updates to Supported Spark Versions</a></li>
<li><a href="#getting-involved">Getting Involved</a></li>
</ul>
</div>
        </aside>

        <!--
{% comment %}
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
-->

<p>The Apache DataFusion PMC is pleased to announce version 0.8.0 of the <a href="https://datafusion.apache.org/comet/">Comet</a> subproject.</p>
<p>Comet is an accelerator for Apache Spark that translates Spark physical plans to DataFusion physical plans for
improved performance and efficiency without requiring any code changes.</p>
<p>This release covers approximately six weeks of development work and is the result of merging 81 PRs from 11
contributors. See the <a href="https://github.com/apache/datafusion-comet/blob/main/dev/changelog/0.8.0.md">change log</a> for more information.</p>
<h2 id="release-highlights">Release Highlights<a class="headerlink" href="#release-highlights" title="Permanent link">¶</a></h2>
<h3 id="performance-stability">Performance &amp; Stability<a class="headerlink" href="#performance-stability" title="Permanent link">¶</a></h3>
<ul>
<li>Up to 4x speedup in jobs using <code>dropDuplicates</code>, thanks to optimizations in the <code>first_value</code> and <code>last_value</code>
  aggregate functions in DataFusion 47.0.0.</li>
<li>Introduction of a global Tokio runtime, which resolves potential deadlocks in certain multi-task scenarios.</li>
</ul>
<h2 id="native-shuffle-improvements">Native Shuffle Improvements<a class="headerlink" href="#native-shuffle-improvements" title="Permanent link">¶</a></h2>
<p>Significant enhancements to the native shuffle mechanism include:</p>
<ul>
<li>Lower memory usage through using <code>interleave_record_batches</code> instead of using array builders.</li>
<li>Support for complex types in shuffle data (note: hash partition expressions still require primitive types).</li>
<li>Reclaimable shuffle files, reducing disk pressure.</li>
<li>Respects <code>spark.local.dir</code> for temporary storage.</li>
<li>Per-task shuffle metrics are now available, providing better visibility into execution behavior.</li>
</ul>
<h2 id="experimental-support-for-datafusions-parquet-scan">Experimental Support for DataFusion’s Parquet Scan<a class="headerlink" href="#experimental-support-for-datafusions-parquet-scan" title="Permanent link">¶</a></h2>
<p>It is now possible to configure Comet to use DataFusion’s Parquet reader instead of Comet’s current Parquet reader. This
has the advantage of supporting complex types, and also has performance optimizations that are not present in Comet's
existing reader.</p>
<p>This release continues with the ongoing improvements and bug fixes and supports more use cases, but there are still
some known issues:</p>
<ul>
<li>There are schema coercion bugs for nested types containing INT96 columns, which can cause incorrect results.</li>
<li>There are compatibility issues when reading integer values that are larger than their type annotation, such as the
  value 1024 being stored in a field annotated as int(8).</li>
<li>A small number of Spark SQL tests remain unsupported (<a href="https://github.com/apache/datafusion-comet/issues/1545">#1545</a>).</li>
</ul>
<p>To enable DataFusion’s Parquet reader, either set <code>spark.comet.scan.impl=native_datafusion</code> or set the environment
variable <code>COMET_PARQUET_SCAN_IMPL=native_datafusion</code>.</p>
<h2 id="updates-to-supported-spark-versions">Updates to Supported Spark Versions<a class="headerlink" href="#updates-to-supported-spark-versions" title="Permanent link">¶</a></h2>
<ul>
<li>Added support for Spark 3.5.5</li>
<li>Dropped support for Spark 3.3.x</li>
</ul>
<h2 id="getting-involved">Getting Involved<a class="headerlink" href="#getting-involved" title="Permanent link">¶</a></h2>
<p>The Comet project welcomes new contributors. We use the same <a href="https://datafusion.apache.org/contributor-guide/communication.html#slack-and-discord">Slack and Discord</a> channels as the main DataFusion
project and have a weekly <a href="https://docs.google.com/document/d/1NBpkIAuU7O9h8Br5CbFksDhX-L9TyO9wmGLPMe0Plc8/edit?usp=sharing">DataFusion video call</a>.</p>
<p>The easiest way to get involved is to test Comet with your current Spark jobs and file issues for any bugs or
performance regressions that you find. See the <a href="https://datafusion.apache.org/comet/user-guide/installation.html">Getting Started</a> guide for instructions on downloading and installing
Comet.</p>
<p>There are also many <a href="https://github.com/apache/datafusion-comet/contribute">good first issues</a> waiting for contributions.</p>

<!--
  Comments Section
  Loaded only after explicit visitor consent to comply with ASF policy.
-->

<div id="comments">
  <hr>
  <h3>Comments</h3>

  <!-- Local loader script -->
  <script src="/content/js/giscus-consent.js" defer></script>

  <!-- Consent UI -->
  <div id="giscus-consent">
    <p>
        We use <a href="https://giscus.app/">Giscus</a> for comments, powered by GitHub Discussions.
        To respect your privacy, Giscus and comments will load only if you click "Show Comments"
    </p>

    <div class="consent-actions">
      <button id="giscus-load" type="button">Show Comments</button>
      <button id="giscus-revoke" type="button" hidden>Hide Comments</button>
    </div>

    <noscript>JavaScript is required to load comments from Giscus.</noscript>
  </div>

  <!-- Container where Giscus will render -->
  <div id="comment-thread"></div>
</div>      </div>
      <aside class="toc-container d-none d-md-block col-md-4 col-xl-3 ms-xl-2">
        <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#release-highlights">Release Highlights</a><ul>
<li><a href="#performance-stability">Performance &amp; Stability</a></li>
</ul>
</li>
<li><a href="#native-shuffle-improvements">Native Shuffle Improvements</a></li>
<li><a href="#experimental-support-for-datafusions-parquet-scan">Experimental Support for DataFusion’s Parquet Scan</a></li>
<li><a href="#updates-to-supported-spark-versions">Updates to Supported Spark Versions</a></li>
<li><a href="#getting-involved">Getting Involved</a></li>
</ul>
</div>
      </aside>
    </div>
  </div>
</div>    
    <!-- footer -->
    <div class="row g-0">
      <div class="col-12">
        <p style="font-style: italic; font-size: 0.8rem; text-align: center;">
          Copyright 2026, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
          Apache&reg; and the Apache feather logo are trademarks of The Apache Software Foundation.
        </p>
      </div>
    </div>
    <script src="/blog/js/bootstrap.bundle.min.js"></script>  </main>
  </body>
</html>
