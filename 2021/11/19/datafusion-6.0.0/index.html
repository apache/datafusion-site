<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Apache Arrow DataFusion 6.0.0 Release | Apache DataFusion Project News &amp; Blog</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Apache Arrow DataFusion 6.0.0 Release" />
<meta name="author" content="pmc" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="&lt;!–" />
<meta property="og:description" content="&lt;!–" />
<link rel="canonical" href="https://datafusion.apache.org/blog/2021/11/19/datafusion-6.0.0/" />
<meta property="og:url" content="https://datafusion.apache.org/blog/2021/11/19/datafusion-6.0.0/" />
<meta property="og:site_name" content="Apache DataFusion Project News &amp; Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-19T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Apache Arrow DataFusion 6.0.0 Release" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pmc"},"dateModified":"2021-11-19T00:00:00+00:00","datePublished":"2021-11-19T00:00:00+00:00","description":"&lt;!–","headline":"Apache Arrow DataFusion 6.0.0 Release","mainEntityOfPage":{"@type":"WebPage","@id":"https://datafusion.apache.org/blog/2021/11/19/datafusion-6.0.0/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://datafusion.apache.org/blog/img/2x_bgwhite_original.png"},"name":"pmc"},"url":"https://datafusion.apache.org/blog/2021/11/19/datafusion-6.0.0/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://datafusion.apache.org/blog/feed.xml" title="Apache DataFusion Project News &amp; Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Apache DataFusion Project News &amp; Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Apache Arrow DataFusion 6.0.0 Release</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-11-19T00:00:00+00:00" itemprop="datePublished">Nov 19, 2021
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">pmc</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--

-->

<h1 id="introduction">Introduction</h1>

<p><a href="https://arrow.apache.org/datafusion/">DataFusion</a> is an embedded
query engine which leverages the unique features of
<a href="https://www.rust-lang.org/">Rust</a> and <a href="https://arrow.apache.org/">Apache
Arrow</a> to provide a system that is high
performance, easy to connect, easy to embed, and high quality.</p>

<p>The Apache Arrow team is pleased to announce the DataFusion 6.0.0 release. This covers 4 months of development work
and includes 134 commits from the following 28 distinct contributors.</p>

<!--
git log --pretty=oneline 5.0.0..6.0.0 datafusion datafusion-cli datafusion-examples | wc -l
     134

git shortlog -sn 5.0.0..6.0.0 datafusion datafusion-cli datafusion-examples | wc -l
      29

      Carlos and xudong963 are same individual
-->

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    28  Andrew Lamb
    26  Jiayu Liu
    13  xudong963
     9  rdettai
     9  QP Hou
     6  Matthew Turner
     5  Daniël Heres
     4  Guillaume Balaine
     3  Francis Du
     3  Marco Neumann
     3  Jon Mease
     3  Nga Tran
     2  Yijie Shen
     2  Ruihang Xia
     2  Liang-Chi Hsieh
     2  baishen
     2  Andy Grove
     2  Jason Tianyi Wang
     1  Nan Zhu
     1  Antoine Wendlinger
     1  Krisztián Szűcs
     1  Mike Seddon
     1  Conner Murphy
     1  Patrick More
     1  Taehoon Moon
     1  Tiphaine Ruy
     1  adsharma
     1  lichuan6
</code></pre></div></div>

<p>The release notes below are not exhaustive and only expose selected highlights of the release. Many other bug fixes
and improvements have been made: we refer you to the complete
<a href="https://github.com/apache/arrow-datafusion/blob/6.0.0/datafusion/CHANGELOG.md">changelog</a>.</p>

<h1 id="new-website">New Website</h1>

<p>Befitting a growing project, DataFusion now has its
<a href="https://arrow.apache.org/datafusion/">own website</a> hosted as part of the
main <a href="https://arrow.apache.org">Apache Arrow Website</a></p>

<h1 id="roadmap">Roadmap</h1>

<p>The community worked to gather their thoughts about where we are
taking DataFusion into a public
<a href="https://arrow.apache.org/datafusion/specification/roadmap.html">Roadmap</a>
for the first time</p>

<h1 id="new-features">New Features</h1>

<ul>
  <li>Runtime operator metrics collection framework</li>
  <li>Object store abstraction for unified access to local or remote storage</li>
  <li>Hive style table partitioning support, for Parquet, CSV, Avro and Json files</li>
  <li>DataFrame API support for: <code class="language-plaintext highlighter-rouge">except</code>, <code class="language-plaintext highlighter-rouge">intersect</code>, <code class="language-plaintext highlighter-rouge">show</code>, <code class="language-plaintext highlighter-rouge">limit</code> and window functions</li>
  <li>SQL
    <ul>
      <li><code class="language-plaintext highlighter-rouge">EXPLAIN ANALYZE</code> with runtime metrics</li>
      <li><code class="language-plaintext highlighter-rouge">trim ( [ LEADING | TRAILING | BOTH ] [ FROM ] string text [, characters text ] )</code> syntax</li>
      <li>Postgres style regular expression matching operators <code class="language-plaintext highlighter-rouge">~</code>, <code class="language-plaintext highlighter-rouge">~*</code>, <code class="language-plaintext highlighter-rouge">!~</code>, and <code class="language-plaintext highlighter-rouge">!~*</code></li>
      <li>SQL set operators <code class="language-plaintext highlighter-rouge">UNION</code>, <code class="language-plaintext highlighter-rouge">INTERSECT</code>, and <code class="language-plaintext highlighter-rouge">EXCEPT</code></li>
      <li><code class="language-plaintext highlighter-rouge">cume_dist</code>, <code class="language-plaintext highlighter-rouge">percent_rank</code> window functions</li>
      <li><code class="language-plaintext highlighter-rouge">digest</code>, <code class="language-plaintext highlighter-rouge">blake2s</code>, <code class="language-plaintext highlighter-rouge">blake2b</code>, <code class="language-plaintext highlighter-rouge">blake3</code> crypto functions</li>
      <li>HyperLogLog based <code class="language-plaintext highlighter-rouge">approx_distinct</code></li>
      <li><code class="language-plaintext highlighter-rouge">is distinct from</code> and <code class="language-plaintext highlighter-rouge">is not distinct from</code></li>
      <li><code class="language-plaintext highlighter-rouge">CREATE TABLE AS SELECT</code></li>
      <li>Accessing elements of nested <code class="language-plaintext highlighter-rouge">Struct</code> and <code class="language-plaintext highlighter-rouge">List</code> columns (e.g. <code class="language-plaintext highlighter-rouge">SELECT struct_column['field_name'], array_column[0] FROM ...</code>)</li>
      <li>Boolean expressions in <code class="language-plaintext highlighter-rouge">CASE</code> statement</li>
      <li><code class="language-plaintext highlighter-rouge">DROP TABLE</code></li>
      <li><code class="language-plaintext highlighter-rouge">VALUES</code> List</li>
      <li>Postgres regex match operators</li>
    </ul>
  </li>
  <li>Support for Avro format</li>
  <li>Support for <code class="language-plaintext highlighter-rouge">ScalarValue::Struct</code></li>
  <li>Automatic schema inference for CSV files</li>
  <li>Better interactive editing support in <code class="language-plaintext highlighter-rouge">datafusion-cli</code> as well as <code class="language-plaintext highlighter-rouge">psql</code> style commands such as <code class="language-plaintext highlighter-rouge">\d</code>, <code class="language-plaintext highlighter-rouge">\?</code>, and <code class="language-plaintext highlighter-rouge">\q</code></li>
  <li>Generic constant evaluation and simplification framework</li>
  <li>Added common subexpression eliminate query plan optimization rule</li>
  <li>Python binding 0.4.0 with all Datafusion 6.0.0 features</li>
</ul>

<p>With these new features, we are also now passing TPC-H queries 8, 13 and 21.</p>

<p>For the full list of new features with their relevant PRs, see the
<a href="https://github.com/apache/arrow-datafusion/blob/6.0.0/datafusion/CHANGELOG.md">enhancements section</a>
in the changelog.</p>

<h1 id="async-planning-and-decoupling-file-format-from-table-layout"><code class="language-plaintext highlighter-rouge">async</code> planning and decoupling file format from table layout</h1>

<p>Driven by the need to support Hive style table partitioning, @rdettai
introduced the following design change to the Datafusion core.</p>

<ul>
  <li>The code for reading specific file formats (<code class="language-plaintext highlighter-rouge">Parquet</code>, <code class="language-plaintext highlighter-rouge">Avro</code>, <code class="language-plaintext highlighter-rouge">CSV</code>, and
<code class="language-plaintext highlighter-rouge">JSON</code>) was separated from the logic that handles grouping sets of
files into execution partitions.</li>
  <li>The query planning process was made <code class="language-plaintext highlighter-rouge">async</code>.</li>
</ul>

<p>As a result, we are able to replace the old <code class="language-plaintext highlighter-rouge">Parquet</code>, <code class="language-plaintext highlighter-rouge">CSV</code> and <code class="language-plaintext highlighter-rouge">JSON</code> table
providers with a single <code class="language-plaintext highlighter-rouge">ListingTable</code> table provider.</p>

<p>This also sets up DataFusion and its plug-in ecosystem to
supporting a wide range of catalogs and various object store implementations.
You can read more about this change in the
<a href="https://docs.google.com/document/d/1Bd4-PLLH-pHj0BquMDsJ6cVr_awnxTuvwNJuWsTHxAQ">design document</a>
and on the <a href="https://github.com/apache/arrow-datafusion/pull/1010">arrow-datafusion#1010 PR</a>.</p>

<h1 id="how-to-get-involved">How to Get Involved</h1>

<p>If you are interested in contributing to DataFusion, we would love to have you! You
can help by trying out DataFusion on some of your own data and projects and filing bug reports and helping to
improve the documentation, or contribute to the documentation, tests or code. A list of open issues suitable for
beginners is <a href="https://github.com/apache/arrow-datafusion/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">here</a>
and the full list is <a href="https://github.com/apache/arrow-datafusion/issues">here</a>.</p>

<p>Check out our new <a href="https://arrow.apache.org/datafusion/community/communication.html">Communication Doc</a> on more
ways to engage with the community.</p>

  </div><a class="u-url" href="/blog/2021/11/19/datafusion-6.0.0/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Apache DataFusion Project News &amp; Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Apache DataFusion Project News &amp; Blog</li><li><a class="u-email" href="mailto:dev@datafusion.apache.org">dev@datafusion.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://www.twitter.com/ApacheDataFusio"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">ApacheDataFusio</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Apache DataFusion is a very fast, extensible query engine for building high-quality  data-centric systems in Rust, using the Apache Arrow in-memory format.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
