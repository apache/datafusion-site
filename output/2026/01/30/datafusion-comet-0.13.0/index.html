<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache DataFusion Comet 0.13.0 Release - Apache DataFusion Blog</title>
<link href="/blog/css/bootstrap.min.css" rel="stylesheet">
<link href="/blog/css/fontawesome.all.min.css" rel="stylesheet">
<link href="/blog/css/headerlink.css" rel="stylesheet">
<link href="/blog/highlight/default.min.css" rel="stylesheet">
<link href="/blog/css/app.css" rel="stylesheet">
<script src="/blog/highlight/highlight.js"></script>
<script>hljs.highlightAll();</script>  </head>
  <body class="d-flex flex-column h-100">
  <main class="flex-shrink-0">
<!-- nav bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" aria-label="Fifth navbar example">
    <div class="container-fluid">
        <a class="navbar-brand" href="/blog/"><img src="/blog/images/logo_original4x.png" style="height: 32px;"/> Apache DataFusion Blog</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarADP" aria-controls="navbarADP" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarADP">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="/blog/about.html">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog/feed.xml">RSS</a>
                </li>
            </ul>
        </div>
    </div>
</nav>    
<!-- article contents -->
<div id="contents">
  <div class="bg-white p-4 p-md-5 rounded">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 main-content">
        <h1>
          Apache DataFusion Comet 0.13.0 Release
        </h1>
        <p>Posted on: Fri 30 January 2026 by pmc</p>

        <aside class="toc-container d-md-none mb-2">
          <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#key-features">Key Features</a><ul>
<li><a href="#native-parquet-write-support-experimental">Native Parquet Write Support (Experimental)</a></li>
<li><a href="#native-iceberg-improvements">Native Iceberg Improvements</a></li>
<li><a href="#native-csv-reading-experimental">Native CSV Reading (Experimental)</a></li>
<li><a href="#new-expressions">New Expressions</a></li>
<li><a href="#ansi-mode-support">ANSI Mode Support</a></li>
<li><a href="#native-shuffle-improvements">Native Shuffle Improvements</a></li>
</ul>
</li>
<li><a href="#performance-improvements">Performance Improvements</a></li>
<li><a href="#deprecations">Deprecations</a></li>
<li><a href="#compatibility">Compatibility</a></li>
</ul>
</div>
        </aside>

        <!--
{% comment %}
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
-->

<p>The Apache DataFusion PMC is pleased to announce version 0.13.0 of the <a href="https://datafusion.apache.org/comet/">Comet</a> subproject.</p>
<p>Comet is an accelerator for Apache Spark that translates Spark physical plans to DataFusion physical plans for
improved performance and efficiency without requiring any code changes.</p>
<p>This release covers approximately eight weeks of development work and is the result of merging 169 PRs from 15
contributors. See the <a href="https://github.com/apache/datafusion-comet/blob/main/dev/changelog/0.13.0.md">change log</a> for more information.</p>
<h2 id="key-features">Key Features<a class="headerlink" href="#key-features" title="Permanent link">¶</a></h2>
<h3 id="native-parquet-write-support-experimental">Native Parquet Write Support (Experimental)<a class="headerlink" href="#native-parquet-write-support-experimental" title="Permanent link">¶</a></h3>
<p>This release introduces experimental native Parquet write capabilities, allowing Comet to intercept and execute Parquet write operations natively through DataFusion. Key capabilities include:</p>
<ul>
<li>File commit protocol support for reliable writes</li>
<li>Remote HDFS writing via OpenDAL integration</li>
<li>Complex type support (arrays, maps, structs)</li>
<li>Proper handling of object store settings</li>
</ul>
<p>To enable native Parquet writes, set:</p>
<pre><code>spark.comet.allowIncompatibleOp.DataWritingCommandExec=true
spark.comet.parquet.write.enabled=true
</code></pre>
<p><strong>Note</strong>: This feature is highly experimental and should not be used in production environments. It is currently categorized as a testing feature and is disabled by default.</p>
<h3 id="native-iceberg-improvements">Native Iceberg Improvements<a class="headerlink" href="#native-iceberg-improvements" title="Permanent link">¶</a></h3>
<p>Comet's fully-native Iceberg integration received significant enhancements in this release:</p>
<p><strong>REST Catalog Support</strong>: Native Iceberg scans now support REST catalogs, enabling integration with catalog services like Apache Polaris and Tabular. Configure with:</p>
<pre><code class="language-shell">--conf spark.sql.catalog.rest_cat=org.apache.iceberg.spark.SparkCatalog
--conf spark.sql.catalog.rest_cat.catalog-impl=org.apache.iceberg.rest.RESTCatalog
--conf spark.sql.catalog.rest_cat.uri=http://localhost:8181
--conf spark.comet.scan.icebergNative.enabled=true
</code></pre>
<p><strong>Session Token Authentication</strong>: Added support for session tokens in native Iceberg scans for secure S3 access.</p>
<p><strong>Performance Optimizations</strong>:</p>
<ul>
<li>Deduplicated serialized metadata reducing memory overhead</li>
<li>Switched from JSON to protobuf for partition value serialization</li>
<li>Removed IcebergFileStream in favor of iceberg-rust's built-in parallelization</li>
<li>Reduced metadata serialization points</li>
<li>Added SchemaAdapter caching</li>
</ul>
<p>To enable fully-native Iceberg scanning:</p>
<pre><code>spark.comet.scan.icebergNative.enabled=true
</code></pre>
<p>The native reader supports Iceberg table spec v1 and v2, all primitive and complex types, schema evolution, time travel, positional and equality deletes, filter pushdown, and various storage backends (local, HDFS, S3).</p>
<h3 id="native-csv-reading-experimental">Native CSV Reading (Experimental)<a class="headerlink" href="#native-csv-reading-experimental" title="Permanent link">¶</a></h3>
<p>Experimental support for native CSV file reading has been added, expanding Comet's file format capabilities beyond Parquet.</p>
<h3 id="new-expressions">New Expressions<a class="headerlink" href="#new-expressions" title="Permanent link">¶</a></h3>
<p>The release adds support for numerous expressions:</p>
<ul>
<li>Array functions: <code>explode</code>, <code>explode_outer</code>, <code>size</code></li>
<li>Date/time functions: <code>unix_date</code>, <code>date_format</code>, <code>datediff</code>, <code>last_day</code>, <code>unix_timestamp</code></li>
<li>String functions: <code>left</code></li>
<li>JSON functions: <code>from_json</code> (partial support)</li>
</ul>
<h3 id="ansi-mode-support">ANSI Mode Support<a class="headerlink" href="#ansi-mode-support" title="Permanent link">¶</a></h3>
<p>Sum and average aggregate expressions now support ANSI mode for both integer and decimal inputs, enabling overflow checking in strict SQL mode.</p>
<h3 id="native-shuffle-improvements">Native Shuffle Improvements<a class="headerlink" href="#native-shuffle-improvements" title="Permanent link">¶</a></h3>
<ul>
<li>Round-robin partitioning is now supported in native shuffle</li>
<li>Spill metrics are now reported correctly</li>
<li>Configurable shuffle writer buffer size via <code>spark.comet.shuffle.write.bufferSize</code></li>
</ul>
<h2 id="performance-improvements">Performance Improvements<a class="headerlink" href="#performance-improvements" title="Permanent link">¶</a></h2>
<p>This release includes extensive performance optimizations:</p>
<ul>
<li><strong>String to integer casting</strong>: Significant speedups through optimized parsing</li>
<li><strong>String functions</strong>: Optimized <code>lpad</code>/<code>rpad</code> to remove unnecessary memory allocations</li>
<li><strong>Date operations</strong>: Improved <code>normalize_nan</code> and date truncate performance</li>
<li><strong>Query planning</strong>: Cached query plans to avoid per-partition serialization overhead</li>
<li><strong>Memory efficiency</strong>: Reduced GC pressure in protobuf serialization</li>
<li><strong>Hash operations</strong>: Optimized complex-type hash implementations including murmur3 support for nested types</li>
<li><strong>Runtime efficiency</strong>: Eliminated busy-polling of Tokio stream for plans without CometScan</li>
<li><strong>Metrics overhead</strong>: Reduced timer and syscall overhead in native shuffle writer</li>
</ul>
<h2 id="deprecations">Deprecations<a class="headerlink" href="#deprecations" title="Permanent link">¶</a></h2>
<p>The <code>native_comet</code> scan mode is now deprecated in favor of <code>native_iceberg_compat</code> and will be removed in a future release. The <code>auto</code> scan mode no longer falls back to <code>native_comet</code>.</p>
<h2 id="compatibility">Compatibility<a class="headerlink" href="#compatibility" title="Permanent link">¶</a></h2>
<p>This release upgrades to DataFusion 51, Arrow 57, and the latest iceberg-rust. The minimum supported Rust version is now 1.88.</p>
<p>Supported platforms include Spark 3.4.3, 3.5.4-3.5.7, and Spark 4.0.x with various JDK and Scala combinations.</p>
<p>The community encourages users to test Comet with existing Spark workloads and welcomes contributions to ongoing development.</p>

<!--
  Comments Section
  Loaded only after explicit visitor consent to comply with ASF policy.
-->

<div id="comments">
  <hr>
  <h3>Comments</h3>

  <!-- Local loader script -->
  <script src="/content/js/giscus-consent.js" defer></script>

  <!-- Consent UI -->
  <div id="giscus-consent">
    <p>
        We use <a href="https://giscus.app/">Giscus</a> for comments, powered by GitHub Discussions.
        To respect your privacy, Giscus and comments will load only if you click "Show Comments"
    </p>

    <div class="consent-actions">
      <button id="giscus-load" type="button">Show Comments</button>
      <button id="giscus-revoke" type="button" hidden>Hide Comments</button>
    </div>

    <noscript>JavaScript is required to load comments from Giscus.</noscript>
  </div>

  <!-- Container where Giscus will render -->
  <div id="comment-thread"></div>
</div>      </div>
      <aside class="toc-container d-none d-md-block col-md-4 col-xl-3 ms-xl-2">
        <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#key-features">Key Features</a><ul>
<li><a href="#native-parquet-write-support-experimental">Native Parquet Write Support (Experimental)</a></li>
<li><a href="#native-iceberg-improvements">Native Iceberg Improvements</a></li>
<li><a href="#native-csv-reading-experimental">Native CSV Reading (Experimental)</a></li>
<li><a href="#new-expressions">New Expressions</a></li>
<li><a href="#ansi-mode-support">ANSI Mode Support</a></li>
<li><a href="#native-shuffle-improvements">Native Shuffle Improvements</a></li>
</ul>
</li>
<li><a href="#performance-improvements">Performance Improvements</a></li>
<li><a href="#deprecations">Deprecations</a></li>
<li><a href="#compatibility">Compatibility</a></li>
</ul>
</div>
      </aside>
    </div>
  </div>
</div>    
    <!-- footer -->
    <div class="row g-0">
      <div class="col-12">
        <p style="font-style: italic; font-size: 0.8rem; text-align: center;">
          Copyright 2026, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
          Apache&reg; and the Apache feather logo are trademarks of The Apache Software Foundation.
        </p>
      </div>
    </div>
    <script src="/blog/js/bootstrap.bundle.min.js"></script>  </main>
  </body>
</html>
