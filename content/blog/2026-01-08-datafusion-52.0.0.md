---
layout: post
title: Apache DataFusion 52.0.0 Released
date: 2026-01-08
author: pmc
categories: [release]
---

<!--
{% comment %}
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
-->

[TOC]

We are proud to announce the release of [DataFusion 52.0.0]. This post highlights
some of the major improvements since [DataFusion 51.0.0]. The complete list of
changes is available in the [changelog]. Thanks to the [121 contributors] for
making this release possible.

TODO: confirm the release date for 52.0.0 and update the front matter if needed.

[DataFusion 52.0.0]: https://crates.io/crates/datafusion/52.0.0
[DataFusion 51.0.0]: https://datafusion.apache.org/blog/2025/11/25/datafusion-51.0.0/
[changelog]: https://github.com/apache/datafusion/blob/branch-52/dev/changelog/52.0.0.md
[120 contributors]: https://github.com/apache/datafusion/blob/branch-52/dev/changelog/52.0.0.md#credits

## Performance Improvements ðŸš€

We continue to make significant performance improvements in DataFusion as explained below.

### Faster `CASE` expression evaluation

DataFusion 52 now has lookup-table based evaluation for certain `CASE`
expressions to avoid repeated evaluation for accelerating common ETL patterns such
as 

```sql
CASE company
    WHEN 1 THEN 'Apple'
    WHEN 5 THEN 'Samsung'
    WHEN 2 THEN 'Motorola'
    WHEN 3 THEN 'LG'
    ELSE 'Other'
END
```

This is the final contains the final work in our CASE performance epic
([#18075]). Related PRs [#18183]. Thanks to [rluvaton] and [pepijnve] for 
the implementation.

[rluvaton]: https://github.com/rluvaton
[pepijnve]: https://github.com/pepijnve


[#18075]: https://github.com/apache/datafusion/issues/18075
[#18183]: https://github.com/apache/datafusion/pull/18183

### New Merge Join

DataFusion 52 includes a rewrite of the sort-merge join, leading to speedups of three orders of magnitude in some cases. 
This change targets pathological slowdowns like the reported
LeftAnti join case in [#18487], which also affected [Apache Comet] workloads. 
Benchmarks in [#18875] show dramatic gains for TPC-H Q21 (moving from
minutes to milliseconds) while leaving other queries unchanged or modestly
faster.

[#18487]: https://github.com/apache/datafusion/issues/18487
[#18875]: https://github.com/apache/datafusion/pull/18875
[Apache Comet]: https://datafusion.apache.org/comet/

### Caching Improvements

This release also includes several additional caching improvements.

First it includes a new statistics cache for Parquet Metadata that avoids repeatedly
(re) calculating statistics for Parquet backed files. This significantly improves
planning time for certain queries. You can see the contents of the new cache using the
[statistics_cache] function in the CLI:

[statistics_cache]: https://datafusion.apache.org/user-guide/cli/functions.html#statistics-cache


```sql
select * from statistics_cache();
+------------------+---------------------+-----------------+------------------------+---------+-----------------+-------------+--------------------+-----------------------+
| path             | file_modified       | file_size_bytes | e_tag                  | version | num_rows        | num_columns | table_size_bytes   | statistics_size_bytes |
+------------------+---------------------+-----------------+------------------------+---------+-----------------+-------------+--------------------+-----------------------+
| .../hits.parquet | 2022-06-25T22:22:22 | 14779976446     | 0-5e24d1ee16380-370f48 | NULL    | Exact(99997497) | 105         | Exact(36445943240) | 0                     |
+------------------+---------------------+-----------------+------------------------+---------+-----------------+-------------+--------------------+-----------------------+
```
Related PRs: [#18971], [#19054]

[#18971]: https://github.com/apache/datafusion/pull/18971
[#19054]: https://github.com/apache/datafusion/pull/19054


It also includes a prefix aware list-files cache by default which accelerates
evaluating partition predicates for HIVE partitioned tables.

```sql
-- Read the hive partitioned dataset from Overture Maps (100s of Parquet files)
CREATE EXTERNAL TABLE overturemaps
STORED AS PARQUET LOCATION 's3://overturemaps-us-west-2/release/2025-12-17.0/';
-- Find all files where the path contains `theme=base without requiring another LIST call
select count(*) from overturemaps where theme='base';
```

You can see the
contents of the new cache using the [list_files_cache] function in the CLI:

[list_files_cache]: https://datafusion.apache.org/user-guide/cli/functions.html#list-files-cache

```sql
create external table overturemaps
stored as parquet
location 's3://overturemaps-us-west-2/release/2025-12-17.0/theme=base/type=infrastructure';
0 row(s) fetched.
> select table, path, metadata_size_bytes, expires_in, unnest(metadata_list)['file_size_bytes'] as file_size_bytes, unnest(metadata_list)['e_tag'] as e_tag from list_files_cache() limit 10;
+--------------+-----------------------------------------------------+---------------------+-----------------------------------+-----------------+---------------------------------------+
| table        | path                                                | metadata_size_bytes | expires_in                        | file_size_bytes | e_tag                                 |
+--------------+-----------------------------------------------------+---------------------+-----------------------------------+-----------------+---------------------------------------+
| overturemaps | release/2025-12-17.0/theme=base/type=infrastructure | 2750                | 0 days 0 hours 0 mins 25.264 secs | 999055952       | "35fc8fbe8400960b54c66fbb408c48e8-60" |
| overturemaps | release/2025-12-17.0/theme=base/type=infrastructure | 2750                | 0 days 0 hours 0 mins 25.264 secs | 975592768       | "8a16e10b722681cdc00242564b502965-59" |
...
| overturemaps | release/2025-12-17.0/theme=base/type=infrastructure | 2750                | 0 days 0 hours 0 mins 25.264 secs | 1016732378      | "6d70857a0473ed9ed3fc6e149814168b-61" |
| overturemaps | release/2025-12-17.0/theme=base/type=infrastructure | 2750                | 0 days 0 hours 0 mins 25.264 secs | 991363784       | "c9cafb42fcbb413f851691c895dd7c2b-60" |
| overturemaps | release/2025-12-17.0/theme=base/type=infrastructure | 2750                | 0 days 0 hours 0 mins 25.264 secs | 1032469715      | "7540252d0d67158297a67038a3365e0f-62" |
+--------------+-----------------------------------------------------+---------------------+-----------------------------------+-----------------+---------------------------------------+
```

Related PRs: [#18146], [#18855], [#19366], [#19298], 

[Epic #17214]: https://github.com/apache/datafusion/issues/17214
[#18146]: https://github.com/apache/datafusion/pull/18146
[#18855]: https://github.com/apache/datafusion/pull/18855
[#19366]: https://github.com/apache/datafusion/pull/19366
[#19298]: https://github.com/apache/datafusion/pull/19298


### Filtering with Hash Join pushdown

DataFusion can now push down build-side hash tables from HashJoinExec into scans
([#17171]). This is sometimes referred to "sideways information passing" (TODO
reference). The initial DataFusion implement supports pushdown when the build
side is small . In this case, DataFusion converts the hash table to an `IN` list
that is pushed down to TableProviders  reducing the join input size early.

Example:

```sql
SELECT *
FROM orders o
JOIN small_dim d
ON o.dim_id = d.id;
```

TODO: include a physical plan snippet that shows the pushdown filter once a
canonical example is selected.

Thanks to [adriangb] for implementing hash join pushdown.
Related PRs: [#18393]

[#17171]: https://github.com/apache/datafusion/issues/17171
[#18393]: https://github.com/apache/datafusion/pull/18393
[adriangb]: https://github.com/adriangb



## Major Features âœ¨

### Arrow IPC Stream file support

DataFusion can now read Arrow IPC stream files ([#18457]). This expands
interoperability with systems that emit Arrow streams directly, making it
simpler to ingest Arrow-native data without conversion. Thanks to [corasaurus-hex]
for implementing this feature.

```sql
CREATE EXTERNAL TABLE ipc_events
STORED AS ARROW
LOCATION 's3://bucket/events.arrow';
```

Related PRs: [#18457]

[#18457]: https://github.com/apache/datafusion/pull/18457
[corasaurus-hex]: https://github.com/corasaurus-hex

### Extensible SQL planning with relation planner extensions

DataFusion now has an API for extending the SQL planner for relations, as
explained in the [Extending SQL in DataFusion Blog]. With this new API, you can
customize DataFusion to support almost any SQL syntax, such as the following
(which are not supported by default) :

```sql
-- Postgres-style JSON operators
SELECT payload->'user'->>'id' FROM logs;
-- MySQL-specific types
SELECT DATETIME '2001-01-01 18:00:00';
-- Statistical sampling
SELECT * FROM sensor_data TABLESAMPLE BERNOULLI(10 PERCENT);
```
[Extending SQL in DataFusion Blog]: https://datafusion.apache.org/blog/2026/01/12/extending-sql/

<figure>
  <img src="/blog/images/extending-sql/architecture.svg" alt="DataFusion SQL processing pipeline: SQL String flows through Parser to AST, then SqlToRel (with Extension Planners) to LogicalPlan, then PhysicalPlanner to ExecutionPlan" width="100%" class="img-responsive">
  <figcaption>
    <b>Figure 1:</b> 
        SQL processing pipeline with relation planner extensions from the 
        <a href="https://datafusion.apache.org/blog/2026/01/12/extending-sql/">Extending SQL in DataFusion Blog</a>. 
  </figcaption>
</figure>

Thanks to [geoffreyclaude] for implementing relation planner extensions, and to
[theirix], [alamb], [NGA-TRAN], and [gabotechs] for reviews and feedback on the
design.  Related PRs: [#17843]

[#17843]: https://github.com/apache/datafusion/pull/17843
[geoffreyclaude]: https://github.com/geoffreyclaude
[theirix]: https://github.com/theirix
[alamb]: https://github.com/alamb
[NGA-TRAN]: https://github.com/NGA-TRAN
[gabotechs]: https://github.com/gabotechs

### Pushdown Expression Evaluation via PhysicalExprAdapter

DataFusion now pushes down expression evaluation into TableProviders using the
PhysicalExprAdapter, replacing the older SchemaAdapter approach ([#14993],
[#16800]). This enables richer pushdown (expressions and projections) and
improves consistency between logical and physical planning.

Diagram:

```
SQL filter/projection
  |  (PhysicalExprAdapter)
  v
TableProvider pushdown
  |  (scan)
  v
Reduced data
```

Thanks to [adriangb] for implementing PhysicalExprAdapter pushdown support.
Related PRs: [#18998], [#19345]

[#14993]: https://github.com/apache/datafusion/issues/14993
[#16800]: https://github.com/apache/datafusion/issues/16800
[#18998]: https://github.com/apache/datafusion/pull/18998
[#19345]: https://github.com/apache/datafusion/pull/19345

### Sort pushdown to sources

DataFusion now supports sort pushdown into data sources, allowing scans to
return sorted data or leverage reversed row groups when possible ([#10433],
[#19064]). This reduces memory pressure and can eliminate explicit sort stages
for partitioned or pre-sorted data.

Example:

```sql
SELECT *
FROM parquet_table
ORDER BY event_time DESC;
```

Thanks to [zhuqi-lucas] for implementing sort pushdown.
Related PRs: [#19064]

[#10433]: https://github.com/apache/datafusion/issues/10433
[#19064]: https://github.com/apache/datafusion/pull/19064
[zhuqi-lucas]: https://github.com/zhuqi-lucas

### DELETE/UPDATE hooks in TableProvider

TableProvider now includes DELETE and UPDATE hooks, with MemTable providing the
first implementation ([#19142]). This is an important step toward fully
featured DML support and enables downstream storage engines to plug in their
own mutation logic.

Example:

```sql
DELETE FROM mem_table WHERE status = 'obsolete';
```

Thanks to [ethan-tyler] for implementing the TableProvider DELETE/UPDATE hooks.
Related PRs: [#19142]

[#19142]: https://github.com/apache/datafusion/pull/19142
[ethan-tyler]: https://github.com/ethan-tyler

### CoalesceBatchesExec removal and integrated batch coalescing

DataFusion continues the work from the CoalesceBatchesExec epic ([#18779]). The
standalone `CoalesceBatchesExec` operator existed to ensure batches were large
enough for vectorized execution, and it was inserted after filter-like
operators such as `FilterExec`, `HashJoinExec`, and `RepartitionExec`. However,
it also blocked other optimizations (like pushing limits through joins) and
made optimizer rules more complex. This release integrates coalescing into the
operators themselves and relies on Arrow's coalesce kernels, reducing plan
complexity while keeping batch sizes efficient.

Diagram:

```
Before:
  Scan -> CoalesceBatches -> Filter -> CoalesceBatches -> Join

After:
  Scan -> Filter (coalesce inline) -> Join (coalesce inline)
```

Related PRs: [#18540], [#18604], [#18630], [#18972], [#19002], [#19342], [#19239]
Thanks to [Tim-53], [Dandandan], [jizezhang], and [feniljain] for implementing
this feature.

[#18779]: https://github.com/apache/datafusion/issues/18779
[#18540]: https://github.com/apache/datafusion/pull/18540
[#18604]: https://github.com/apache/datafusion/pull/18604
[#18630]: https://github.com/apache/datafusion/pull/18630
[#18972]: https://github.com/apache/datafusion/pull/18972
[#19002]: https://github.com/apache/datafusion/pull/19002
[#19342]: https://github.com/apache/datafusion/pull/19342
[#19239]: https://github.com/apache/datafusion/pull/19239
[Tim-53]: https://github.com/Tim-53
[Dandandan]: https://github.com/Dandandan
[jizezhang]: https://github.com/jizezhang
[feniljain]: https://github.com/feniljain

## Upgrade Guide and Changelog

Upgrading to 52.0.0 should be straightforward for most users. Please review the
[Upgrade Guide]
for details on breaking changes and code snippets to help with the transition.
For a comprehensive list of all changes, please refer to the [changelog].

## About DataFusion

[Apache DataFusion] is an extensible query engine, written in [Rust], that uses
[Apache Arrow] as its in-memory format. DataFusion is used by developers to
create new, fast, data-centric systems such as databases, dataframe libraries,
and machine learning and streaming applications. While [DataFusion's primary
design goal] is to accelerate the creation of other data-centric systems, it
provides a reasonable experience directly out of the box as a [dataframe
library], [Python library], and [command-line SQL tool].

[apache datafusion]: https://datafusion.apache.org/
[rust]: https://www.rust-lang.org/
[apache arrow]: https://arrow.apache.org
[DataFusion's primary design goal]: https://datafusion.apache.org/user-guide/introduction.html#project-goals
[dataframe library]: https://datafusion.apache.org/user-guide/dataframe.html
[python library]: https://datafusion.apache.org/python/
[command-line SQL tool]: https://datafusion.apache.org/user-guide/cli/
[Upgrade Guide]: https://datafusion.apache.org/library-user-guide/upgrading.html

## How to Get Involved

DataFusion is not a project built or driven by a single person, company, or
foundation. Rather, our community of users and contributors works together to
build a shared technology that none of us could have built alone.

If you are interested in joining us, we would love to have you. You can try out
DataFusion on some of your own data and projects and let us know how it goes,
contribute suggestions, documentation, bug reports, or a PR with documentation,
tests, or code. A list of open issues suitable for beginners is [here], and you
can find out how to reach us on the [communication doc].

[here]: https://github.com/apache/arrow-datafusion/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22
[communication doc]: https://datafusion.apache.org/contributor-guide/communication.html
