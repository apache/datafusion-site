<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Introducing Apache Arrow DataFusion Contrib | Apache DataFusion Project News &amp; Blog</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Introducing Apache Arrow DataFusion Contrib" />
<meta name="author" content="pmc" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="&lt;!–" />
<meta property="og:description" content="&lt;!–" />
<link rel="canonical" href="https://datafusion.apache.org/blog/2022/03/21/datafusion-contrib/" />
<meta property="og:url" content="https://datafusion.apache.org/blog/2022/03/21/datafusion-contrib/" />
<meta property="og:site_name" content="Apache DataFusion Project News &amp; Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-03-21T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Introducing Apache Arrow DataFusion Contrib" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pmc"},"dateModified":"2022-03-21T00:00:00+00:00","datePublished":"2022-03-21T00:00:00+00:00","description":"&lt;!–","headline":"Introducing Apache Arrow DataFusion Contrib","mainEntityOfPage":{"@type":"WebPage","@id":"https://datafusion.apache.org/blog/2022/03/21/datafusion-contrib/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://datafusion.apache.org/blog/img/2x_bgwhite_original.png"},"name":"pmc"},"url":"https://datafusion.apache.org/blog/2022/03/21/datafusion-contrib/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://datafusion.apache.org/blog/feed.xml" title="Apache DataFusion Project News &amp; Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Apache DataFusion Project News &amp; Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Introducing Apache Arrow DataFusion Contrib</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-03-21T00:00:00+00:00" itemprop="datePublished">Mar 21, 2022
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">pmc</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--

-->

<h1 id="introduction">Introduction</h1>

<p>Apache Arrow <a href="https://arrow.apache.org/datafusion/">DataFusion</a> is an extensible query execution framework, written in Rust, that uses <a href="https://arrow.apache.org">Apache Arrow</a> as its in-memory format.</p>

<p>When you want to extend your Rust project with <a href="https://arrow.apache.org/datafusion/user-guide/sql/sql_status.html">SQL support</a>, a DataFrame API, or the ability to read and process Parquet, JSON, Avro or CSV data, DataFusion is definitely worth checking out. DataFusion’s pluggable design makes creating extensions at various points particular easy to build.</p>

<p>DataFusion’s  SQL, <code class="language-plaintext highlighter-rouge">DataFrame</code>, and manual <code class="language-plaintext highlighter-rouge">PlanBuilder</code> API let users access a sophisticated query optimizer and execution engine capable of fast, resource efficient, and parallel execution that takes optimal advantage of todays multicore hardware. Being written in Rust means DataFusion can offer <em>both</em> the safety of dynamic languages as well as the resource efficiency of a compiled language.</p>

<p>The DataFusion team is pleased to announce the creation of the <a href="https://github.com/datafusion-contrib">DataFusion-Contrib</a> GitHub organization to support and accelerate other projects.  While the core DataFusion library remains under Apache governance, the contrib organization provides a more flexible testing ground for new DataFusion features and a home for DataFusion extensions.  With this announcement, we are pleased to introduce the following inaugural DataFusion-Contrib repositories.</p>

<h2 id="datafusion-python">DataFusion-Python</h2>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-python">project</a> provides Python bindings to the core Rust implementation of DataFusion, which allows users to:</p>

<ul>
  <li>Work with familiar SQL or DataFrame APIs to run queries in a safe, multi-threaded environment, returning results in Python</li>
  <li>Create User Defined Functions and User Defined Aggregate Functions for complex operations</li>
  <li>Pay no overhead to copy between Python and underlying Rust execution engine (by way of Apache Arrow arrays)</li>
</ul>

<h3 id="upcoming-enhancements">Upcoming enhancements</h3>

<p>The team is focusing on exposing more features from the underlying Rust implementation of DataFusion and improving documentation.</p>

<h3 id="how-to-install">How to install</h3>

<p>From <code class="language-plaintext highlighter-rouge">pip</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>datafusion
</code></pre></div></div>

<p>Or</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> pip <span class="nb">install </span>datafusion
</code></pre></div></div>

<h2 id="datafusion-objectstore-s3">DataFusion-ObjectStore-S3</h2>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-objectstore-s3">crate</a> provides an <code class="language-plaintext highlighter-rouge">ObjectStore</code> implementation for querying data stored in S3 or S3 compatible storage. This makes it almost as easy to query data that lives on S3 as lives in local files</p>

<ul>
  <li>Ability to create <code class="language-plaintext highlighter-rouge">S3FileSystem</code> to register as part of DataFusion <code class="language-plaintext highlighter-rouge">ExecutionContext</code></li>
  <li>Register files or directories stored on S3 with <code class="language-plaintext highlighter-rouge">ctx.register_listing_table</code></li>
</ul>

<h3 id="upcoming-enhancements-1">Upcoming enhancements</h3>

<p>The current priority is adding python bindings for <code class="language-plaintext highlighter-rouge">S3FileSystem</code>.  After that there will be async improvements as DataFusion adopts more of that functionality and we are looking into S3 Select functionality.</p>

<h3 id="how-to-install-1">How to Install</h3>

<p>Add the below to your <code class="language-plaintext highlighter-rouge">Cargo.toml</code> in your Rust Project with DataFusion.</p>

<div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">datafusion-objectstore-s3</span> <span class="p">=</span> <span class="s">"0.1.0"</span>
</code></pre></div></div>

<h2 id="datafusion-substrait">DataFusion-Substrait</h2>

<p><a href="https://substrait.io/">Substrait</a> is an emerging standard that provides a cross-language serialization format for relational algebra (e.g. expressions and query plans).</p>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-substrait">crate</a> provides a Substrait producer and consumer for DataFusion.  A producer converts a DataFusion logical plan into a Substrait protobuf and a consumer does the reverse.</p>

<p>Examples of how to use this crate can be found <a href="https://github.com/datafusion-contrib/datafusion-substrait/blob/main/src/lib.rs">here</a>.</p>

<h3 id="potential-use-cases">Potential Use Cases</h3>

<ul>
  <li>Replace custom DataFusion protobuf serialization.</li>
  <li>Make it easier to pass query plans over FFI boundaries, such as from Python to Rust</li>
  <li>Allow Apache Calcite query plans to be executed in DataFusion</li>
</ul>

<h2 id="datafusion-bigtable">DataFusion-BigTable</h2>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-bigtable">crate</a> implements <a href="https://cloud.google.com/bigtable">Bigtable</a> as a data source and physical executor for DataFusion queries.  It currently supports both UTF-8 string and 64-bit big-endian signed integers in Bigtable.  From a SQL perspective it supports both simple and composite row keys with <code class="language-plaintext highlighter-rouge">=</code>, <code class="language-plaintext highlighter-rouge">IN</code>, and <code class="language-plaintext highlighter-rouge">BETWEEN</code> operators as well as projection pushdown.  The physical execution for queries is handled by this crate while any subsequent aggregation, group bys, or joins are handled in DataFusion.</p>

<h3 id="upcoming-enhancements-2">Upcoming Enhancements</h3>

<ul>
  <li>Predicate pushdown
    <ul>
      <li>Value range</li>
      <li>Value Regex</li>
      <li>Timestamp range</li>
    </ul>
  </li>
  <li>Multithreaded</li>
  <li>Partition aware execution</li>
  <li>Production ready</li>
</ul>

<h3 id="how-to-install-2">How to Install</h3>

<p>Add the below to your <code class="language-plaintext highlighter-rouge">Cargo.toml</code> in your Rust Project with DataFusion.</p>

<div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">datafusion-bigtable</span> <span class="p">=</span> <span class="s">"0.1.0"</span>
</code></pre></div></div>

<h2 id="datafusion-hdfs">DataFusion-HDFS</h2>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-objectstore-hdfs">crate</a> introduces <code class="language-plaintext highlighter-rouge">HadoopFileSystem</code> as a remote <code class="language-plaintext highlighter-rouge">ObjectStore</code> which provides the ability to query HDFS files.  For HDFS access the <a href="https://github.com/yahoNanJing/fs-hdfs">fs-hdfs</a> library is used.</p>

<h2 id="datafusion-tokomak">DataFusion-Tokomak</h2>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-tokomak">crate</a> provides an e-graph based DataFusion optimization framework based on the Rust <a href="https://egraphs-good.github.io">egg</a> library.  An e-graph is a data structure that powers the equality saturation optimization technique.</p>

<p>As context, the optimizer framework within DataFusion is currently <a href="https://github.com/apache/arrow-datafusion/issues/1972">under review</a> with the objective of implementing a more strategic long term solution that is more efficient and simpler to develop.</p>

<p>Some of the benefits of using <code class="language-plaintext highlighter-rouge">egg</code> within DataFusion are:</p>

<ul>
  <li>Implements optimized algorithms that are hard to match with manually written optimization passes</li>
  <li>Makes it easy and less verbose to add optimization rules</li>
  <li>Plugin framework to add more complex optimizations</li>
  <li>Egg does not depend on rule order and can lead to a higher level of optimization by being able to apply multiple rules at the same time until it converges</li>
  <li>Allows for cost-based optimizations</li>
</ul>

<p>This is an exciting new area for DataFusion with lots of opportunity for community involvement!</p>

<h2 id="datafusion-tui">DataFusion-Tui</h2>

<p><a href="https://github.com/datafusion-contrib/datafusion-tui">DataFusion-tui</a> aka <code class="language-plaintext highlighter-rouge">dft</code> provides a feature rich terminal application for using DataFusion.  It has drawn inspiration and several features from <code class="language-plaintext highlighter-rouge">datafusion-cli</code>.  In contrast to <code class="language-plaintext highlighter-rouge">datafusion-cli</code> the objective of this tool is to provide a light SQL IDE experience for querying data with DataFusion.  This includes features such as the following which are currently implemented:</p>

<ul>
  <li>Tab Management to provide clean and structured organization of DataFusion queries, results, <code class="language-plaintext highlighter-rouge">ExecutionContext</code> information, and logs
    <ul>
      <li>SQL Editor
        <ul>
          <li>Text editor for writing SQL queries</li>
        </ul>
      </li>
      <li>Query History
        <ul>
          <li>History of executed queries, their execution time, and the number of returned rows</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">ExecutionContext</code> information
        <ul>
          <li>Expose information on which physical optimizers are used and which <code class="language-plaintext highlighter-rouge">ExecutionConfig</code> settings are set</li>
        </ul>
      </li>
      <li>Logs
        <ul>
          <li>Logs from <code class="language-plaintext highlighter-rouge">dft</code>, DataFusion, and any dependent libraries</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Support for custom <code class="language-plaintext highlighter-rouge">ObjectStore</code>s
    <ul>
      <li>S3</li>
    </ul>
  </li>
  <li>Preload DDL from <code class="language-plaintext highlighter-rouge">~/.datafusionrc</code> to enable having local “database” available at startup</li>
</ul>

<h3 id="upcoming-enhancements-3">Upcoming Enhancements</h3>

<ul>
  <li>SQL Editor
    <ul>
      <li>Command to write query results to file</li>
      <li>Multiple SQL editor tabs</li>
    </ul>
  </li>
  <li>Expose more information from <code class="language-plaintext highlighter-rouge">ExecutionContext</code></li>
  <li>A help tab that provides information on functions</li>
  <li>Query custom <code class="language-plaintext highlighter-rouge">TableProvider</code>s such as <a href="https://github.com/delta-io/delta-rs">DeltaTable</a> or <a href="https://github.com/datafusion-contrib/datafusion-bigtable">BigTable</a></li>
</ul>

<h2 id="datafusion-streams">DataFusion-Streams</h2>

<p><a href="https://github.com/datafusion-contrib/datafusion-streams">DataFusion-Stream</a> is a new testing ground for creating a <code class="language-plaintext highlighter-rouge">StreamProvider</code> in DataFusion that will enable querying streaming data sources such as Apache Kafka.  The implementation for this feature is currently being designed and is under active review.  Once the design is finalized the trait and attendant data structures will be added back to the core DataFusion crate.</p>

<h2 id="datafusion-java">DataFusion-Java</h2>

<p>This <a href="https://github.com/datafusion-contrib/datafusion-java">project</a> created an initial set of Java bindings to DataFusion.  The project is currently in maintenance mode and is looking for maintainers to drive future development.</p>

<h1 id="how-to-get-involved">How to Get Involved</h1>

<p>If you are interested in contributing to DataFusion, and learning about state of
the art query processing, we would love to have you join us on the journey! You
can help by trying out DataFusion on some of your own data and projects and let us know how it goes or contribute a PR with documentation, tests or code. A list of open issues suitable for beginners is <a href="https://github.com/apache/arrow-datafusion/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">here</a></p>

<p>The best way to find out about creating new extensions within DataFusion-Contrib is reaching out on the <code class="language-plaintext highlighter-rouge">#arrow-rust</code> channel of the Apache Software Foundation <a href="https://join.slack.com/t/the-asf/shared_invite/zt-vlfbf7ch-HkbNHiU_uDlcH_RvaHv9gQ">Slack</a> workspace.</p>

<p>You can also check out our new <a href="https://arrow.apache.org/datafusion/community/communication.html">Communication Doc</a> on more ways to engage with the community.</p>

<p>Links for each DataFusion-Contrib repository are provided above if you would like to contribute to those.</p>

  </div><a class="u-url" href="/blog/2022/03/21/datafusion-contrib/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Apache DataFusion Project News &amp; Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Apache DataFusion Project News &amp; Blog</li><li><a class="u-email" href="mailto:dev@datafusion.apache.org">dev@datafusion.apache.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/apache"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">apache</span></a></li><li><a href="https://www.twitter.com/ApacheDataFusio"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">ApacheDataFusio</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Apache DataFusion is a very fast, extensible query engine for building high-quality  data-centric systems in Rust, using the Apache Arrow in-memory format.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
